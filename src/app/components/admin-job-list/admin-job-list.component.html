<div class="admin-jobs-container mt-5">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">All Jobs</h1>
      <p class="page-subtitle">Manage and oversee all service requests</p>
    </div>
    <div class="header-stats">
      <div class="stat-card">
        <span class="stat-number">{{ jobs.length }}</span>
        <span class="stat-label">Total Jobs</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{{ getPendingCount() }}</span>
        <span class="stat-label">Pending</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{{ getCompletedCount() }}</span>
        <span class="stat-label">Completed</span>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Loading jobs...</p>
    </div>
  </div>

  <!-- Jobs Table -->
  <div class="table-container" *ngIf="!loading">
    <div class="table-wrapper">
      <table class="jobs-table">
        <thead>
          <tr>
            <th>Description</th>
            <th>Status</th>
            <th>Customer</th>
            <th>Artisan</th>
            <th>Preferred Date</th>
            <th>Charge</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let job of jobs" class="table-row">
            <!-- Description -->
            <td class="description-cell">
              <div class="cell-content">
                <div class="job-icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 7h-4V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"></path>
                  </svg>
                </div>
                <span class="description-text">{{ job.description }}</span>
              </div>
            </td>

            <!-- Status -->
            <td class="status-cell">
              <span class="status-badge"
                    [ngClass]="{
                      'status-pending': job.status === 'Pending',
                      'status-assigned': job.status === 'Assigned',
                      'status-awaiting': job.status === 'AwaitingCustomerConfirmation',
                      'status-confirmed': job.status === 'CustomerConfirmed',
                      'status-completed': job.status === 'Completed',
                      'status-work-completed': job.status === 'WorkCompletedByArtisan'
                    }">
                {{ job.status }}
              </span>
            </td>

            <!-- Customer Name -->
            <td class="customer-cell">
              <div class="user-info">
                <div class="user-avatar">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg>
                </div>
                <span>{{ job.customer?.fullName || 'Unknown Customer' }}</span>
              </div>
            </td>

            <!-- Artisan Name -->
            <td class="artisan-cell">
              <div class="user-info" *ngIf="job.artisan">
                <div class="user-avatar artisan-avatar">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg>
                </div>
                <span>{{ job.artisan.fullName }}</span>
              </div>
              <span *ngIf="!job.artisan" class="not-assigned">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="8" x2="12" y2="12"></line>
                  <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                Not Assigned
              </span>
            </td>

            <!-- Preferred Date -->
            <td class="date-cell">
              <div class="date-info">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span>{{ job.preferredDate | date : 'mediumDate' }}</span>
              </div>
            </td>

            <!-- Charge -->
            <td class="charge-cell">
              <span *ngIf="job.artisanCharge" class="charge-amount">
                â‚¦{{ job.artisanCharge | number }}
              </span>
              <span *ngIf="!job.artisanCharge" class="not-set">
                Not Set
              </span>
            </td>

            <!-- Actions -->
            <td class="actions-cell">
              <div class="action-buttons">
                <!-- Assign Artisan -->
                <a 
                  class="action-btn btn-assign"
                  [routerLink]="['/admin/job/assign', job.id]"
                  title="Assign Artisan">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="8.5" cy="7" r="4"></circle>
                    <line x1="20" y1="8" x2="20" y2="14"></line>
                    <line x1="23" y1="11" x2="17" y2="11"></line>
                  </svg>
                  Assign
                </a>

                <!-- Set Charge -->
                <a 
                  class="action-btn btn-charge"
                  [routerLink]="['/admin/job/charge', job.id]"
                  title="Set Charge">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                  </svg>
                  Set Charge
                </a>

                <!-- Mark Completed -->
                <a
                  class="action-btn btn-complete"
                  *ngIf="job.status !== 'Completed'"
                  [routerLink]="['/admin/job/complete', job.id]"
                  title="Mark Completed">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                  Complete
                </a>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && jobs.length === 0" class="empty-state">
    <div class="empty-icon">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="9" y1="9" x2="15" y2="15"></line>
        <line x1="15" y1="9" x2="9" y2="15"></line>
      </svg>
    </div>
    <h3>No jobs found</h3>
    <p>There are currently no jobs in the system.</p>
  </div>
</div>