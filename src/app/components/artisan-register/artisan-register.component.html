<!-- artisan-register.component.html -->
<div class="registration-container">
  <div class="floating-elements">
    <div class="floating-circle"></div>
    <div class="floating-circle"></div>
    <div class="floating-circle"></div>
  </div>

  <div class="container mt-5">
    <div class="form-card">
      <h3 class="form-title">Artisan Registration</h3>
      
      <form [formGroup]="registerForm" (ngSubmit)="registerArtisan()" novalidate>
        <div class="form-group">
          <label class="form-label" for="fullName">Full Name</label>
          <div class="input-group">
            <input 
              type="text" 
              id="fullName"
              formControlName="fullName" 
              class="form-control has-icon" 
              placeholder="Enter your full name"
            >
            <span class="input-icon">ğŸ‘¤</span>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="email">Email Address</label>
          <div class="input-group">
            <input 
              type="email" 
              id="email"
              formControlName="email" 
              class="form-control has-icon" 
              placeholder="Enter your email address"
            >
            <span class="input-icon">ğŸ“§</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="phoneNumber">Phone Number</label>
            <div class="input-group">
              <input 
                type="tel" 
                id="phoneNumber"
                formControlName="phoneNumber" 
                class="form-control has-icon" 
                placeholder="Enter your phone number"
              >
              <span class="input-icon">ğŸ“±</span>
            </div>
          </div>
<div class="form-group">
  <label class="form-label" for="password">Password</label>
  <div class="input-group password-group">
    <input 
      [type]="showPassword ? 'text' : 'password'" 
      id="password"
      formControlName="password" 
      class="form-control has-icon has-toggle" 
      placeholder="Create a secure password"
    >
    <span class="input-icon">ğŸ”’</span>
    <span 
      class="password-toggle" 
      (click)="togglePasswordVisibility()"
      [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
    >
      <span *ngIf="!showPassword">ğŸ‘ï¸</span>
      <span *ngIf="showPassword">ğŸ™ˆ</span>
    </span>
    
  </div>
  <!-- Password Strength Indicator -->
<div *ngIf="registerForm.get('password')?.value" class="password-strength">
  <div class="strength-bar">
    <div class="strength-fill" [style.width.%]="getPasswordStrength()" 
         [ngClass]="getPasswordStrengthClass()"></div>
  </div>
  <small class="strength-text">
    Password Strength: {{ getPasswordStrengthText() }}
  </small>
</div>

<!-- Password Requirements -->
<div *ngIf="registerForm.get('password')?.value && passwordPolicy" class="password-requirements">
  
  <div class="requirement" [class.met]="hasMinLength()">
    <i class="bi" [ngClass]="hasMinLength() ? 'bi-check-circle-fill' : 'bi-circle'"></i>
    <span>{{ passwordPolicy.requiredLength }}+ characters</span>
  </div>

  <div *ngIf="passwordPolicy.requireUppercase" class="requirement" [class.met]="hasUppercase()">
    <i class="bi" [ngClass]="hasUppercase() ? 'bi-check-circle-fill' : 'bi-circle'"></i>
    <span>Uppercase letter</span>
  </div>

  <div *ngIf="passwordPolicy.requireLowercase" class="requirement" [class.met]="hasLowercase()">
    <i class="bi" [ngClass]="hasLowercase() ? 'bi-check-circle-fill' : 'bi-circle'"></i>
    <span>Lowercase letter</span>
  </div>

  <div *ngIf="passwordPolicy.requireDigit" class="requirement" [class.met]="hasNumber()">
    <i class="bi" [ngClass]="hasNumber() ? 'bi-check-circle-fill' : 'bi-circle'"></i>
    <span>Number</span>
  </div>

  <div *ngIf="passwordPolicy.requireSpecialCharacter" class="requirement" [class.met]="hasSpecialChar()">
    <i class="bi" [ngClass]="hasSpecialChar() ? 'bi-check-circle-fill' : 'bi-circle'"></i>
    <span>Special character</span>
  </div>

</div>

</div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="serviceType">Service Category</label>
            <div class="select-wrapper">
              <select 
                id="serviceType"
                formControlName="serviceTypeId" 
                class="form-control"
              >
                <option value="">-- Select Your Service --</option>
                <option *ngFor="let service of serviceTypes" [value]="service.id">
                  {{ service.name }}
                </option>
              </select>
              <span class="select-icon">ğŸ› ï¸</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="location">Location</label>
            <div class="select-wrapper">
              <select 
                id="location"
                formControlName="locationId" 
                class="form-control"
              >
                <option value="">-- Select Your Location --</option>
                <option *ngFor="let loc of locations" [value]="loc.id">
                  {{ loc.name }}
                </option>
              </select>
              <span class="select-icon">ğŸ“</span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Profile Photo</label>
          <div class="file-input-wrapper" [class.file-uploaded]="selectedFileName" (click)="fileInput.click()">
            <input 
              #fileInput
              type="file" 
              (change)="onFileSelected($event)" 
              class="file-input"
              accept="image/*"
              style="display: none;"
            >
            <div class="file-upload-content" *ngIf="!selectedFileName">
              <div class="file-upload-icon">ğŸ“¸</div>
              <div class="file-upload-text">
                Click to upload your profile photo
                <br><small>JPG, PNG or GIF (Max 5MB)</small>
              </div>
            </div>
            <div class="file-uploaded-content" *ngIf="selectedFileName">
              <div class="file-success-icon">âœ…</div>
              <div class="file-success-text">
                <strong>{{ selectedFileName }}</strong>
                <br><small>{{ selectedFileSize }} - Click to change</small>
              </div>
            </div>
          </div>
        </div>

        <button 
          [disabled]="isSubmitting || registerForm.invalid" 
          type="submit" 
          class="submit-btn"
        >
          <span class="btn-content">
            <span *ngIf="!isSubmitting">Register as Artisan</span>
            <span *ngIf="isSubmitting" class="loading-content">
              <span class="spinner"></span>
              Registering...
            </span>
          </span>
        </button>

        <div class="success-message" *ngIf="message">
          <div class="success-icon">ğŸ‰</div>
          <div class="success-text">{{ message }}</div>
        </div>
      </form>
    </div>
  </div>
</div>